(function(e){"use strict";function t(){var e=document.createElement("input");return"placeholder"in e}function n(){if(e(".js-copy-personal-info").attr("checked")=="checked"){e("#js-cc-fields input").each(function(t,n){e(n).val(e("#"+e(n).attr("name").substr(3)).val()).removeClass("field-error")});e("#cc-name").val(e("#first-name").val()+" "+e("#last-name").val());e("#cc-country").val(e("#country").val());e("#js-cc-fields").fadeTo("fast",.5,function(){e("#js-cc-fields input").each(function(t,n){e(n).prop("readonly",true)});e("#cc-country").prop("disabled",true)})}else{e("#js-cc-fields").fadeTo("fast",1,function(){e("#js-cc-fields input").each(function(t,n){e(n).prop("readonly",false)});e("#cc-country").prop("disabled",false)})}}function r(){var t=parseInt(e("#cc-exp-year").val()),n=parseInt(e("#cc-exp-mo").val());if(t<30){t+=2e3}var r=new Date(t,n),i=new Date;i.setHours(0,0,0,0);if(i.getTime()-r.getTime()>0){e("#cc-exp-mo, #cc-exp-year").addClass("field-custom-error")}else{e("#cc-exp-mo, #cc-exp-year").removeClass("field-custom-error")}}function i(){var t=e("#hearabout")[0];if(e(t.options[t.selectedIndex]).hasClass("js-select-extra")){e("#js-select-extra-name").html(t.options[t.selectedIndex].value+":");e("#js-select-extra-input").show()}else{e("#hearabout-extra").val("");e("#js-select-extra-input").hide()}}function s(){if(!e(this).hasClass("js-custom-amount")){e(".js-custom-amount").each(function(t,n){e(n).val("")})}}function o(){var t=e("#sdf_form form")[0];e("body").append('<div id="loading"></div>');m.spin(document.getElementById("loading"));if(t.checkValidity()){var n={number:e("#cc-number").val(),cvc:e("#cc-cvc").val(),exp_month:e("#cc-exp-mo").val(),exp_year:e("#cc-exp-year").val(),name:e("#cc-name").val(),address_line1:e("#cc-address1").val(),address_line2:e("#cc-address2").val(),address_city:e("#cc-city").val(),address_state:e("#cc-state").val(),address_zip:e("#cc-zip").val(),address_country:e("#cc-country").val()};Stripe.card.createToken(n,l);e("a#js-form-submit").addClass("disabled").parent().find("img").prop("src","/img/button-grey-tip.png")}else{m.stop();e("#sdf_form input:invalid").each(function(t,n){e(n).addClass("field-error")})}}function u(t){t=t||1e4;setTimeout(function(){e(".alert").first("p").fadeTo("fast",0,function(){e(this).animate({height:0},"fast").remove()});f()},t)}function a(){m.stop();e("#loading").remove()}function f(){window.location.href=window.location.protocol+"//"+window.location.hostname+"/donation-confirmation/"}function l(t,n){var r={};n=typeof n!=="undefined"?n:{};if(n.error){e(".alert").append('<p class="error">'+n.error.message+"</p>");u()}else{e("#stripe-token").val(n.id);r=e("#sdf_form form").serializeObject();e.each(r,function(e,t){if(e.substring(0,3)==="cc-"){delete r[e]}});e.post(ajaxurl,{action:"sdf_parse",data:r},function(t){a();t=JSON.parse(t);e(".alert").append('<p class="'+t.type+'">'+t.message+"</p>").show();document.getElementsByClassName("alert")[0].scrollIntoView();u()})}}function c(){var t=this,n=true;e(".js-custom-amount").each(function(t,r){if(e(r).val().length){n=false}});if(n){e(t).prevAll(".js-custom-amount-click").prop("checked","checked")}}function h(){var t=event.keyCode||event.which;if(t!=9){if(!e(this).val().length){e(this).prevAll(".js-custom-amount-click").prop("checked","checked");var n=this;e(".js-custom-amount").each(function(t,r){if(r!=n){e(r).val("")}})}}}function p(){if(e(this).val().length){e(this).select();return}else{e(".js-custom-amount").each(function(t,n){e(n).val("")});e(this).prevAll(".js-custom-amount-click").prop("checked","checked")}}function d(){var e=document.getElementsByTagName("input");for(var t=0,n=e.length;t<n;t++){if(e[t].getAttribute("placeholder")){e[t].style.cssText="color:#939393;";e[t].value=e[t].getAttribute("placeholder");e[t].onclick=function(){if(this.value==this.getAttribute("placeholder")){this.value="";this.style.cssText="color:#000;font-style:normal;"}};e[t].onblur=function(){if(this.value==""){this.value=this.getAttribute("placeholder");this.style.cssText="color:#939393;"}}}}}e.fn.serializeObject=function(){var t={};var n=this.serializeArray();e.each(n,function(){if(t[this.name]!==undefined){if(!t[this.name].push){t[this.name]=[t[this.name]]}t[this.name].push(this.value||"")}else{t[this.name]=this.value||""}});return t};var v={lines:9,length:13,width:7,radius:26,corners:.8,rotate:30,direction:1,color:"#FFF",speed:.7,trail:76,shadow:false,hwaccel:true,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},m=new Spinner(v);e(document).ready(function(){if(!t()){}e(".js-custom-amount-click").click(function(){e(this).nextAll(".js-custom-amount").focus()});e(".js-custom-amount").focus(c).click(p).keydown(h);e(".amount").click(s);e("#hearabout").change(i);e(".js-copy-personal-info").click(n);e("a#js-form-submit.disabled").on("click",function(){return false});e("#sdf_form form").h5Validate({errorClass:"field-error"});e("#cc-exp-year").on("focusout",r);e("#js-form-submit").click(o)})})(jQuery)